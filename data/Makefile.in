# Makefile for pekwm
# Copyright (C) 2002 Claes Nästen <pekdon@gmx.net>

prefix = @prefix@
DATADIR = @datadir@/@PACKAGE@
SYSCONFDIR = @sysconfdir@/@PACKAGE@
DATA_MODE = 644
INSTALL = @INSTALL@

all: config menu theme

config:
	sed 's:<PREFIX>:$(DATADIR):g' config.in > config

menu:
	sed 's:<PREFIX>:$(DATADIR):g' menu.in > menu

theme:
	( cd themes && ${MAKE} )

install: all
	mkdir -p $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) config $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) menu $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) keys $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) mouse $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) autoproperties $(DESTDIR)$(SYSCONFDIR)
	$(INSTALL) -m $(DATA_MODE) start $(DESTDIR)$(SYSCONFDIR)
	( cd themes && ${MAKE} install )
	( cd scripts && ${MAKE} install )

clean:
	rm -f config menu
	( cd themes && ${MAKE} clean )
